// BuiltinsRISCV.def - RISCV builtin function database -------------*- C++ -*-//
//
// Copyright 2021 ETH Zurich, University of Bologna.
// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.
// See https://llvm.org/LICENSE.txt for license information.
// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception
//
//===----------------------------------------------------------------------===//
///
/// \file
/// This file defines the RISC-V builtin function database.
/// Users of this file must define the BUILTIN macro to make use of this
/// information.
///
//===----------------------------------------------------------------------===//

// The format of this database matches clang/Basic/Builtins.def.

#if defined(BUILTIN) && !defined(TARGET_BUILTIN)
#   define TARGET_BUILTIN(ID, TYPE, ATTRS, FEATURE) BUILTIN(ID, TYPE, ATTRS)
#endif

// SSR builtins

#if defined(TARGET_BUILTIN) && !defined(SSR_BUILTIN)
#   define SSR_BUILTIN(ID, TYPE, ATTRS, FEATURE) TARGET_BUILTIN(__builtin_ssr_##ID, TYPE, ATTRS, FEATURE)
#endif

SSR_BUILTIN(setup_1d_r, "vUiULiULiULiv*", "n", "xssr")
SSR_BUILTIN(setup_1d_w, "vUiULiULiULiv*", "n", "xssr")
SSR_BUILTIN(read, "vUiUiv*", "n", "xssr")
SSR_BUILTIN(write, "vUiUiv*", "n", "xssr")
SSR_BUILTIN(setup_bound_stride_1d, "vUiULiULi", "n", "xssr")
SSR_BUILTIN(setup_bound_stride_2d, "vUiULiULi", "n", "xssr")
SSR_BUILTIN(setup_bound_stride_3d, "vUiULiULi", "n", "xssr")
SSR_BUILTIN(setup_bound_stride_4d, "vUiULiULi", "n", "xssr")
SSR_BUILTIN(setup_repetition, "vUiULi", "n", "xssr")
SSR_BUILTIN(push, "vUid", "n", "xssr")
SSR_BUILTIN(pop, "dUi", "n", "xssr")
SSR_BUILTIN(enable, "v", "n", "xssr")
SSR_BUILTIN(disable, "v", "n", "xssr")
SSR_BUILTIN(barrier, "vUi", "n", "xssr")

// SDMA builtins

#if defined(TARGET_BUILTIN) && !defined(SDMA_BUILTIN)
#   define SDMA_BUILTIN(ID, TYPE, ATTRS, FEATURE) TARGET_BUILTIN(__builtin_sdma_##ID, TYPE, ATTRS, FEATURE)
#endif

SDMA_BUILTIN(start_oned, "UiULLiULLiUiUi", "n", "xdma")
SDMA_BUILTIN(start_twod, "UiULLiULLiUiUiUiUiUi", "n", "xdma")
SDMA_BUILTIN(stat, "UiUi", "n", "xdma")
SDMA_BUILTIN(wait_for_idle, "v", "n", "xdma")

#undef BUILTIN
#undef TARGET_BUILTIN
#undef SSR_BUILTIN
#undef SDMA_BUILTIN

